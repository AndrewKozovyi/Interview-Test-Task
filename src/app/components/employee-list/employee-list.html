<div class="employee-list-container">
  <div class="list-controls">
    <div class="search-bar">
      <input pInputText type="text" [formControl]="searchControl" placeholder="Search by name or email" />

      <div class="sort">
        <span>Sort by:</span>
        <div class="sort-buttons">
          <button pButton label="Name A-Z" (click)="setSortOrder('name-asc')"></button>
          <button pButton label="Name Z-A" (click)="setSortOrder('name-desc')"></button>
          <button pButton label="Start Date" (click)="setSortOrder('startDate')"></button>
          <button pButton label="Skills" (click)="setSortOrder('numSkills')"></button>
        </div>
      </div>
    </div>

    <div class="action-buttons">
      <button pButton [icon]="viewMode === 'card' ? 'pi pi-list' : 'pi pi-table'" (click)="toggleViewMode()"></button>

      <button pButton label="Add New Employee" icon="pi pi-plus" (click)="openEmployeeForm()"></button>
    </div>
  </div>

  @if (displayEmployees$ | async; as employees) {
    <div class="employee-cards" [ngClass]="{'list-view': viewMode === 'list'}">
      @if (employees.length > 0) {
        @for (employee of employees; track employee.id) {
          @switch (viewMode) {
            @case ('card') {
              <app-employee-default-card
                [employee]="employee"
                (delete)="deleteEmployee($event)"
                (edit)="openEmployeeForm(employee)">
              </app-employee-default-card>
            }
            @case ('list') {
              <app-employee-list-card
                [employee]="employee"
                (delete)="deleteEmployee($event)"
                (edit)="openEmployeeForm(employee)">
              </app-employee-list-card>
            }
          }
        }
      } @else {
        <div class="no-employees-message">
          <p>No employees found.</p>
        </div>
      }
    </div>
  }
</div>
